sum(delta_id$dist[1:7])
# delay death infection matrix
H <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-delta_id$SItrunc))
H[i,f:i] <- rev(delta_id$dist)[((delta_id$SItrunc+1)-(i-f)):(delta_id$SItrunc+1)]
if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# delay SI death to death matrix
W <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-SI$SItrunc))
W[i,f:i] <- rev(SI$dist)[((SI$SItrunc+1)-(i-f)):(SI$SItrunc+1)]
# if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# overall infectivity matrix
Ot <- W%*%mD
# correct infectivity when >0 case observed but no infectivity
for(i in 1:N_geo){
Ot[ which( (D[,i+1]>0) & (Ot[,i] ==0 ) ),i] <-NA
}
# matrix of mobility and delayed version
M <- as.matrix(mobility$mob_combined_smooth[,-1])
# M_D <- H %*% M
SI
library(rmarkdown)
source(file = 'date_input.r')
for (date_num in 1:length(dates_input)){
for (si_num in c(1,2)){
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
si <- si_num
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('input_',date_week_finishing,'_SI_',si,'.html'))
}
}
library(rmarkdown)
source(file = 'date_input.r')
for (date_num in 1:length(dates_input)){
for (si_num in c(1,2)){
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
si <- si_num
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_SI_',si,'.html'))
}
}
library(rmarkdown)
source(file = 'Rdata/date_input.r')
library(rmarkdown)
source(file = 'date_input.r')
for (date_num in 1:length(dates_input)){
for (si_num in c(1,2)){
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
si <- si_num
rmarkdown::render(input = 'template_input_google.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/inputG_',
date_week_finishing,'_SI_',si,'.html'))
}
}
getwd()
source(file = 'date_input.r')
source(file = 'date_input.r')
date_num=1
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
si <- si_num
d <- readRDS(file=paste0(path_s,'/inputs/data_',date_week_finishing,'.rds'))
path_s <- '../../Mobility.2.0.Save/Saved_file/'
d <- readRDS(file=paste0(path_s,'/inputs/data_',date_week_finishing,'.rds'))
#
country <- as.character(d$Country)
# mean sd of ditrivution infection to death
mu_id = 18.8
si_std = .45*mu_id
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv')
,stringsAsFactors = FALSE)
# d_m needs 3 colums for "geo_type"            "region"              "transportation_type"
# +one column per dates names as 'X.2020.01.20'
#miss-spelled
country[-which(as.character(country) %in% as.character(d_m$region))]
# missing for apple: Algeria, China, Dominican_Republic, Ecuador, Iran, Peru, South_Korea,
#corrections to match name in ECDC data
d_m$region[which(d_m$region %in% 'Czech Republic')] <- 'Czechia'
d_m$region[which(d_m$region %in% 'UK')] <- 'United_Kingdom'
d_m$region[which(d_m$region %in% 'United States')] <- 'United_States_of_America'
d_m$region[which(d_m$region %in% 'United Arab Emirates')] <- 'United_Arab_Emirates'
d_m$region[which(d_m$region %in% 'South Africa')] <- 'South_Africa'
d_m$region[which(d_m$region %in% 'Saudi Arabia')] <- 'Saudi_Arabia'
d_m$region[which(d_m$region %in% 'Republic of Korea')] <- 'South_Korea'
#miss-spelled
country[-which(as.character(country) %in% as.character(d_m$region))]
# check
if (length(country[-which(country %in% d_m$region)])>0){
print('warning')
country[-which(country %in% d_m$region)]
}
# include country with data in both dataset
f1 <- which(country %in% d_m$region)
f2 <- which(d_m$region %in% country)
d_m <- d_m[f2,]
d$I_active_transmission <- d$I_active_transmission[,c(1,f1+1)]
d$D_active_transmission <- d$D_active_transmission[,c(1,f1+1)]
d$Country <- d$Country[f1]
# include dates with data in both
dates <- as.Date(substr(names(d_m[,-c(1:3)]),start = 2, stop = 11),format='%Y.%m.%d')
f1 <- which(d$I_active_transmission$dates %in% dates)
f2 <- which(dates %in% d$I_active_transmission$dates)
d_m <- d_m[,c(1,2,3,3+f2)]
d$I_active_transmission <- d$I_active_transmission[f1,]
d$D_active_transmission <- d$D_active_transmission[f1,]
# correct epi
D <- d$D_active_transmission
mD <- as.matrix(D[,-1])
I <- d$I_active_transmission
cumD <- data.frame(D$dates,apply(D[,-1],2,cumsum))
cumI <- data.frame(I$dates,apply(I[,-1],2,cumsum))
N_geo <- ncol(D)-1
N_days <- nrow(D)
country <- as.character(d$Country)
mobility <- process_mobility(d_m = d_m)
sapply(paste0('../Rfunction_library/pre_MCMC/',
(list.files('../Rfunction_library/pre_MCMC/'))),FUN = source)
mobility <- process_mobility(d_m = d_m)
layout(matrix(1:4,2,2))
for (i  in 1:N_geo){
plot(mobility$mob_raw$dates,mobility$mob_raw[,i+1],main = country[i],ylim = c(0,1),
xlab = '',ylab = 'prop. mobility')
lines(mobility$mob_combined_smooth$dates,mobility$mob_combined_smooth[,i+1],col='blue')
# lines(mob3[,i+1],col='red')
abline(h=1,lwd=2,col='red',lty=2)
}
si=1
amma_dist_EpiEstim(si_mu =  d$si_mean[si],
si_std  = d$si_std[si],
SItrunc = 30)
a=gamma_dist_EpiEstim(si_mu =  d$si_mean[si],
si_std  = d$si_std[si],
SItrunc = 30)
## # serial interval estimate used: mean = 3.96, sd =  4.75
## # Teunis et al.
SI <- list()
for (si in c(1,2)){
SI[[si]]$si_mean <- d$si_mean[si]
SI[[si]]$si_mean <- d$si_mean[si]
SI[[si]]$SI <- gamma_dist_EpiEstim(si_mu =  d$si_mean[si],
si_std  = d$si_std[si],
SItrunc = 30)
plot(seq(0, SI[[si]]$SI$SItrunc), SI[[si]]$SI$dist, type = "h",
lwd = 10, lend = 1, xlab = "time (days)", ylab = "frequency")
title(main = "Discrete distribution of the serial interval of COVID-19")
}
si
d$si_mean[si]
d$si_mean[si]
SI[[si]]$si_mean <- d$si_mean[si]
## # serial interval estimate used: mean = 3.96, sd =  4.75
## # Teunis et al.
SI <- list()
for (si in c(1,2)){
SI[[si]] <- list()
SI[[si]]$si_mean <- d$si_mean[si]
SI[[si]]$si_mean <- d$si_mean[si]
SI[[si]]$SI <- gamma_dist_EpiEstim(si_mu =  d$si_mean[si],
si_std  = d$si_std[si],
SItrunc = 30)
plot(seq(0, SI[[si]]$SI$SItrunc), SI[[si]]$SI$dist, type = "h",
lwd = 10, lend = 1, xlab = "time (days)", ylab = "frequency")
title(main = "Discrete distribution of the serial interval of COVID-19")
}
delta_id <- gamma_dist_EpiEstim(si_mu = mu_id ,
si_std  = .45*mu_id,
SItrunc = 50)
plot(seq(0, delta_id$SItrunc), delta_id$dist, type = "h",
lwd = 10, lend = 1, xlab = "time (days)", ylab = "frequency")
title(main = "Discrete distribution of the delay infection to death")
sum(delta_id$dist[1:7])
# delay SI death to death matrix
W <- list()
si
si=1
W[[si]]$W <- matrix(0,nrow = N_days, ncol = N_days)
# delay death infection matrix
H <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-delta_id$SItrunc))
H[i,f:i] <- rev(delta_id$dist)[((delta_id$SItrunc+1)-(i-f)):(delta_id$SItrunc+1)]
if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# matrix of mobility and delayed version
M <- as.matrix(mobility$mob_combined_smooth[,-1])
# M_D <- H %*% M
# delay SI death to death matrix
W <- list()
Ot <- list()
for (si in c(1,2)){
W[[si]] <- list()
W[[si]]$W <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-SI[[si]]$SI$SItrunc))
W[[si]]$W[i,f:i] <- rev(SI[[si]]$SI$dist)[((SI[[si]]$SI$SItrunc+1)-(i-f)):(SI[[si]]$SI$SItrunc+1)]
# if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# overall infectivity matrix
Ot[[si]] <- list()
Ot[[si]]$Ot <- W[[si]]$W%*%mD
# correct infectivity when >0 case observed but no infectivity
for(i in 1:N_geo){
Ot[[si]]$Ot[ which( (D[,i+1]>0) & (Ot[,i] ==0 ) ),i] <-NA
}
}
si
# delay SI death to death matrix
W <- list()
W[[si]] <- list()
W[[si]]$W <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-SI[[si]]$SI$SItrunc))
W[[si]]$W[i,f:i] <- rev(SI[[si]]$SI$dist)[((SI[[si]]$SI$SItrunc+1)-(i-f)):(SI[[si]]$SI$SItrunc+1)]
# if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# overall infectivity matrix
Ot[[si]] <- list()
Ot[[si]]$Ot <- W[[si]]$W %*% mD
# delay death infection matrix
H <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-delta_id$SItrunc))
H[i,f:i] <- rev(delta_id$dist)[((delta_id$SItrunc+1)-(i-f)):(delta_id$SItrunc+1)]
if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# matrix of mobility and delayed version
M <- as.matrix(mobility$mob_combined_smooth[,-1])
# M_D <- H %*% M
# delay SI death to death matrix
W <- list()
Ot <- list()
for (si in c(1,2)){
W[[si]] <- list()
W[[si]]$W <- matrix(0,nrow = N_days, ncol = N_days)
for (i in 1:N_days){
f <- max(c(1,i-SI[[si]]$SI$SItrunc))
W[[si]]$W[i,f:i] <- rev(SI[[si]]$SI$dist)[((SI[[si]]$SI$SItrunc+1)-(i-f)):(SI[[si]]$SI$SItrunc+1)]
# if (i>1) H[i,f:i] <-  H[i,f:i]/sum( H[i,f:i])
}
# overall infectivity matrix
Ot[[si]] <- list()
Ot[[si]]$Ot <- W[[si]]$W %*% mD
# correct infectivity when >0 case observed but no infectivity
for(i in 1:N_geo){
Ot[[si]]$Ot[ which( (D[,i+1]>0) & (Ot[[si]]$Ot[,i] ==0 ) ),i] <-NA
}
}
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
si <- si_num
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
d <- readRDS(file = '../../Mobility.2.0.Save/Saved_file/inputProcessing/Rdata/2020-03-15_inputs_from_A.rds')
aa=d$Ot
aa=d$W
aa=d$Ot
aa=d$delta_id
aa=d$SI
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
d <- readRDS(file = '../../Mobility.2.0.Save/Saved_file/inputProcessing/Rdata/2020-03-15_inputs_from_A.rds')
aa=d$SI
library(rmarkdown)
source(file = 'Rdata/date_input.r')
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in length(dates_input)){
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
input <- readRDS(file=paste0(path_s,'inputProcessing/Rdata/',date_week_finishing,'_inputs_from_A.rds'))
}
### read mobility
d_m <- read.csv(file='../inputs/applemobilitytrends-2020-05-16.csv',stringsAsFactors = FALSE)
### read mobility
d_m <- read.csv(file=path_s,'inputs/applemobilitytrends-2020-05-16.csv',stringsAsFactors = FALSE)
for (date_num in length(dates_input)){
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
input <- readRDS(file=paste0(path_s,'inputProcessing/Rdata/',date_week_finishing,'_inputs_from_A.rds'))
}
### read mobility
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv'),
stringsAsFactors = FALSE)
# d_m needs 3 colums for "geo_type"            "region"              "transportation_type"
# +one column per dates names as 'X.2020.01.20'
#miss-spelled
# country[-which(as.character(country) %in% as.character(d_m$region))]
# missing for apple: Algeria, China, Dominican_Republic, Ecuador, Iran, Peru, South_Korea,
#corrections to match name in ECDC data
d_m$region[which(d_m$region %in% 'Czech Republic')] <- 'Czechia'
d_m$region[which(d_m$region %in% 'UK')] <- 'United_Kingdom'
d_m$region[which(d_m$region %in% 'United States')] <- 'United_States_of_America'
d_m$region[which(d_m$region %in% 'Saudi Arabia')] <- 'Saudi_Arabia'
d_m$region[which(d_m$region %in% 'Republic of Korea')] <- 'South_Korea'
country <- names(input$D)[-1]
country2 <- country
country2[which(country2 %in% 'United_Kingdom')] <- 'UK'
country2[which(country2 %in% 'United_States_of_America')] <- 'USA'
country2[which(country2 %in% 'South_Korea')] <- 'South Korea'
country2[which(country2 %in% 'Saudi_Arabia')] <- 'Saudi Arabia'
country2[which(country2 %in% 'Dominican_Republic')] <- 'Dominican Rep.'
tab1 <- data.frame(country = country2,
death = colSums(input$D[,-1]),
mobility = rep(NA,length(country)),
mobilityXources = rep(NA,length(country) ))
for (i in 1:length(country)){
tab1$mobility[i] <- round(min(input$M[,i])*100,digits = 1)
tab1$mobilityXources[i] <- min(input$M[,i])
f <- which(d_m$region %in% country[i])
tab1$mobilityXources[i] <- length(f)
}
# write.csv(tab1,file='output/table1.csv')
for (date_num in length(dates_input)){
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
input <- readRDS(file=paste0(path_s,'inputProcessing/Rdata/',date_week_finishing,'_inputs_from_G.rds'))
}
### read mobility
# d_m <- read.csv(file='../inputs/applemobilitytrends-2020-04-26.csv',stringsAsFactors = FALSE)
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),
stringsAsFactors = FALSE)
# d_m needs 3 colums for "geo_type"            "region"              "transportation_type"
# +one column per dates names as 'X.2020.01.20'
#
# #miss-spelled
# country[-which(as.character(country) %in% as.character(d_m$region))]
# missing for apple: Algeria, China, Dominican_Republic, Ecuador, Iran, Peru, South_Korea,
#corrections to match name in ECDC data
d_m$region[which(d_m$region %in% 'United Kingdom')] <- 'United_Kingdom'
d_m$region[which(d_m$region %in% 'United States')] <- 'United_States_of_America'
d_m$region[which(d_m$region %in% 'South Korea')] <- 'South_Korea'
d_m$region[which(d_m$region %in% 'Saudi Arabia')] <- 'Saudi_Arabia'
d_m$region[which(d_m$region %in% 'Dominican Republic')] <- 'Dominican_Republic'
country <- names(input$D)[-1]
country2 <- country
country2[which(country2 %in% 'United_Kingdom')] <- 'UK'
country2[which(country2 %in% 'United_States_of_America')] <- 'USA'
country2[which(country2 %in% 'South_Korea')] <- 'South Korea'
country2[which(country2 %in% 'Saudi_Arabia')] <- 'Saudi Arabia'
country2[which(country2 %in% 'Dominican_Republic')] <- 'Dominican Rep.'
tab2 <- data.frame(country = country2,
death = colSums(input$D[,-1]),
mobility = rep(NA,length(country)),
mobilityXources = rep(NA,length(country) ))
for (i in 1:length(country)){
tab2$mobility[i] <- round(min(input$M[,i])*100,digits = 1)
tab2$mobilityXources[i] <- min(input$M[,i])
f <- which(d_m$region %in% country[i])
tab2$mobilityXources[i] <- length(f)
}
# write.csv(tab1,file='output/table1.csv')
tab <- merge(x = tab1, y = tab2, by = 'country', all = TRUE)
tab$death.x[which(is.na(tab$death.x))] <- tab$death.y[which(is.na(tab$death.x))]
tab <- tab[order(as.character(tab$country)),c(1:3,6,4,7)]
write.csv(tab,file=paste0(path_s,'inputProcessing/Rdata/table1.csv'))
getwd()
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-05-16.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-07-18.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../Mobility.2.0.Save/Saved_file/'
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../../../Box Sync/save_research/Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-07-18.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../../../Box Sync/save_research/Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-07-18.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
i
date_num
library(rmarkdown)
source(file = 'date_input.r')
path_s <- '../../../../Box Sync/save_research/Mobility.2.0.Save/Saved_file/'
for (date_num in 1:length(dates_input)){
for (D_source in c('A','G')){
if (D_source == 'A'){
d_m <- read.csv(file=paste0(path_s,'inputs/applemobilitytrends-2020-07-18.csv')
,stringsAsFactors = FALSE)
}else{
d_m <- read.csv(file=paste0(path_s,'inputs/google.csv'),stringsAsFactors = FALSE)
}
date_week_finishing <-  as.Date(dates_input[date_num],format = '%Y-%m-%d')
rmarkdown::render(input = 'template_input.Rmd',
output_file = paste0('../../../../Box Sync/save_research/Mobility.2.0.Save/Saved_file/inputProcessing/input_',
date_week_finishing,'_from_',D_source,'.html'))
}
}
